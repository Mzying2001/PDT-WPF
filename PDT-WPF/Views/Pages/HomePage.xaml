<Page x:Class="PDT_WPF.Views.Pages.HomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:PDT_WPF.Views.Pages"
      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
      xmlns:hc="https://handyorg.github.io/handycontrol"
      xmlns:Utils="clr-namespace:PDT_WPF.Views.Utils"
      mc:Ignorable="d"
      
      d:DesignHeight="450"
      d:DesignWidth="800"
      Title="主页"
      DataContext="{Binding Source={StaticResource Locator}, Path=HomePage}">

    <Page.Resources>
        
        <!--标题样式-->
        <Style
            x:Key="HeaderStyle"
            TargetType="TextBlock">
            <Setter Property="FontSize" Value="26"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        
    </Page.Resources>

    <Grid>
        <ScrollViewer>
            <StackPanel>

                <TextBlock
                    Margin="10,5"
                    Style="{StaticResource HeaderStyle}"
                    Text="推荐"/>

                <hc:ScrollViewer
                    IsInertiaEnabled="True"
                    HorizontalScrollBarVisibility="Auto">
                    <ItemsControl
                        Background="White"
                        ItemsSource="{Binding AdPhotos}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Rectangle
                                    RadiusX="5"
                                    RadiusY="5"
                                    Width="280"
                                    Height="150"
                                    Margin="5,10"
                                    Cursor="Hand"
                                    Effect="{StaticResource EffectShadow2}">
                                    <Rectangle.Fill>
                                        <ImageBrush ImageSource="{Binding}"/>
                                    </Rectangle.Fill>
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger
                                            EventName="MouseLeftButtonDown">
                                            <i:InvokeCommandAction
                                                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Page}, Path=DataContext.ShowAdCmd}"
                                                CommandParameter="{Binding}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </Rectangle>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                        <!--横向滚动-->
                        <i:Interaction.Behaviors>
                            <Utils:HorizontalScrollBehavior/>
                        </i:Interaction.Behaviors>
                    </ItemsControl>
                </hc:ScrollViewer>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
